(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[320],{6205:(e,s,a)=>{Promise.resolve().then(a.bind(a,3675))},3675:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>B});var l=a(5155),t=a(2115),r=a(241),n=a(8971),i=a(4085),d=a(2336),c=a(5007),o=a(6078),m=a(1719),u=a(1902),h=a(8867),x=a(9602);let p=o.bL;o.YJ;let g=o.WT,j=t.forwardRef((e,s)=>{let{className:a,children:t,...r}=e;return(0,l.jsxs)(o.l9,{ref:s,className:(0,x.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...r,children:[t,(0,l.jsx)(o.In,{asChild:!0,children:(0,l.jsx)(m.A,{className:"h-4 w-4 opacity-50"})})]})});j.displayName=o.l9.displayName;let f=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,l.jsx)(o.PP,{ref:s,className:(0,x.cn)("flex cursor-default items-center justify-center py-1",a),...t,children:(0,l.jsx)(u.A,{className:"h-4 w-4"})})});f.displayName=o.PP.displayName;let N=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,l.jsx)(o.wn,{ref:s,className:(0,x.cn)("flex cursor-default items-center justify-center py-1",a),...t,children:(0,l.jsx)(m.A,{className:"h-4 w-4"})})});N.displayName=o.wn.displayName;let v=t.forwardRef((e,s)=>{let{className:a,children:t,position:r="popper",...n}=e;return(0,l.jsx)(o.ZL,{children:(0,l.jsxs)(o.UC,{ref:s,className:(0,x.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===r&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:r,...n,children:[(0,l.jsx)(f,{}),(0,l.jsx)(o.LM,{className:(0,x.cn)("p-1","popper"===r&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),(0,l.jsx)(N,{})]})})});v.displayName=o.UC.displayName,t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,l.jsx)(o.JU,{ref:s,className:(0,x.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",a),...t})}).displayName=o.JU.displayName;let y=t.forwardRef((e,s)=>{let{className:a,children:t,...r}=e;return(0,l.jsxs)(o.q7,{ref:s,className:(0,x.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...r,children:[(0,l.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,l.jsx)(o.VF,{children:(0,l.jsx)(h.A,{className:"h-4 w-4"})})}),(0,l.jsx)(o.p4,{children:t})]})});y.displayName=o.q7.displayName,t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,l.jsx)(o.wv,{ref:s,className:(0,x.cn)("-mx-1 my-1 h-px bg-muted",a),...t})}).displayName=o.wv.displayName;var b=a(2079),w=a(6195);let A=(0,a(1027).F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),S=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,l.jsx)(w.b,{ref:s,className:(0,x.cn)(A(),a),...t})});S.displayName=w.b.displayName;var C=a(4505),k=a(2316),P=a(7696),E=a(3473),R=a(2725),F=a(9191),_=a(3518),L=a(6967),U=a(5739),z=a(3608);function B(){let[e,s]=(0,t.useState)([]),[a,o]=(0,t.useState)([]),[m,u]=(0,t.useState)([]),[h,x]=(0,t.useState)([]),[f,N]=(0,t.useState)(!0),[w,A]=(0,t.useState)(!1),[B,I]=(0,t.useState)(!1),[T,V]=(0,t.useState)(1),[Z,$]=(0,t.useState)(1),[O,q]=(0,t.useState)(null),D=(0,t.useRef)(null),G=(0,z.I)(),{toast:J}=(0,r.dj)(),[W,H]=(0,t.useState)(""),[M,X]=(0,t.useState)(""),[Y,K]=(0,t.useState)(""),[Q,ee]=(0,t.useState)(""),[es,ea]=(0,t.useState)(null),[el,et]=(0,t.useState)(null),[er,en]=(0,t.useState)(null),[ei,ed]=(0,t.useState)(null),ec=(0,t.useRef)(null),eo=(0,t.useRef)(null),em=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;I(!0);try{await new Promise(e=>setTimeout(e,300));let s=await (0,U.dT)(e,10);x(s),$(10===s.length?e+1:e),V(e)}catch(e){console.error("Error loading songs:",e),J({title:"Error",description:"Failed to load songs. API rate limit may have been reached.",variant:"destructive"})}finally{I(!1)}};(0,t.useEffect)(()=>((async()=>{N(!0);try{let[e,a,l]=await Promise.all([(0,U.On)(),(0,U.bA)(),(0,U.zv)()]);s(e),o(a),u(l),await em(1)}catch(e){console.error("Error loading data:",e),J({title:"Error",description:"Failed to load required data",variant:"destructive"})}finally{N(!1)}})(),()=>{D.current&&(D.current.pause(),D.current.src="")}),[]);let eu=async e=>{if(e.preventDefault(),!W.trim()||!M||!Y||!Q||!es||!el){J({title:"Validation Error",description:"Please fill in all fields and upload both image and song file",variant:"destructive"});return}A(!0);try{let e=new FormData;e.append("name",W),e.append("language",M),e.append("genere",Y),e.append("artist",Q),e.append("song_image",es),e.append("song",el),await (0,U.X1)(e),J({title:"Success",description:"Song added successfully"}),H(""),X(""),K(""),ee(""),ea(null),et(null),en(null),ed(null),await em(1)}catch(e){console.error("Error adding song:",e),J({title:"Error",description:"Failed to add song",variant:"destructive"})}finally{A(!1)}},eh=(e,s)=>{D.current||(D.current=new Audio,D.current.addEventListener("ended",()=>{q(null)})),O===e?(D.current.pause(),q(null)):(null!==O&&D.current.pause(),D.current.src=s,D.current.play().catch(e=>{console.error("Error playing audio:",e),J({title:"Playback Error",description:"Could not play the audio file",variant:"destructive"})}),q(e))},ex=s=>{let a=e.find(e=>e.id===s);return a?a.name:"Unknown"},ep=e=>{let s=a.find(s=>s.id===e);return s?s.name:"Unknown"},eg=e=>{let s=m.find(s=>s.id===e);return s?s.name:"Unknown"};return(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)(n.A,{children:[(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsx)("div",{className:"flex items-center justify-between",children:(0,l.jsx)("h1",{className:"text-3xl font-bold text-accent",children:"Songs"})}),(0,l.jsxs)(c.Zp,{className:"bg-white",children:[(0,l.jsxs)(c.aR,{children:[(0,l.jsx)(c.ZB,{className:"text-accent",children:"Add New Song"}),(0,l.jsx)(c.BT,{children:"Upload a new song with details"})]}),(0,l.jsx)(c.Wu,{children:f?(0,l.jsx)("div",{className:"flex justify-center py-4",children:(0,l.jsx)(C.A,{className:"h-6 w-6 animate-spin text-accent"})}):(0,l.jsxs)("form",{onSubmit:eu,className:"space-y-4",children:[(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(S,{htmlFor:"song-name",children:"Song Name"}),(0,l.jsx)(d.p,{id:"song-name",placeholder:"Enter song name",value:W,onChange:e=>H(e.target.value),disabled:w,className:"border-primary-light focus:border-accent"})]}),(0,l.jsxs)("div",{className:"grid gap-4 md:grid-cols-3",children:[(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(S,{htmlFor:"language",children:"Language"}),(0,l.jsxs)(p,{value:M,onValueChange:X,disabled:w,children:[(0,l.jsx)(j,{id:"language",className:"border-primary-light focus:border-accent",children:(0,l.jsx)(g,{placeholder:"Select language"})}),(0,l.jsx)(v,{children:e.map(e=>(0,l.jsx)(y,{value:e.id.toString(),children:e.name},e.id))})]})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(S,{htmlFor:"genre",children:"Genre"}),(0,l.jsxs)(p,{value:Y,onValueChange:K,disabled:w,children:[(0,l.jsx)(j,{id:"genre",className:"border-primary-light focus:border-accent",children:(0,l.jsx)(g,{placeholder:"Select genre"})}),(0,l.jsx)(v,{children:a.map(e=>(0,l.jsx)(y,{value:e.id.toString(),children:e.name},e.id))})]})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(S,{htmlFor:"artist",children:"Artist"}),(0,l.jsxs)(p,{value:Q,onValueChange:ee,disabled:w,children:[(0,l.jsx)(j,{id:"artist",className:"border-primary-light focus:border-accent",children:(0,l.jsx)(g,{placeholder:"Select artist"})}),(0,l.jsx)(v,{children:m.map(e=>(0,l.jsx)(y,{value:e.id.toString(),children:e.name},e.id))})]})]})]}),(0,l.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(S,{children:"Song Cover Image"}),(0,l.jsx)("div",{className:"relative h-32 w-full cursor-pointer rounded-md border border-dashed border-primary-light flex items-center justify-center",onClick:()=>{var e;return null===(e=ec.current)||void 0===e?void 0:e.click()},children:er?(0,l.jsx)("img",{src:er||"/placeholder.svg",alt:"Preview",className:"h-full w-full rounded-md object-cover"}):(0,l.jsxs)("div",{className:"flex flex-col items-center",children:[(0,l.jsx)(k.A,{className:"h-8 w-8 text-accent"}),(0,l.jsx)("p",{className:"mt-2 text-sm text-inactive-grey",children:"Click to upload image"})]})}),(0,l.jsx)("input",{ref:ec,type:"file",accept:"image/*",className:"hidden",onChange:e=>{if(e.target.files&&e.target.files[0]){let s=e.target.files[0];ea(s),en(URL.createObjectURL(s))}},disabled:w})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(S,{children:"Song Audio File"}),(0,l.jsx)("div",{className:"relative h-32 w-full cursor-pointer rounded-md border border-dashed border-primary-light flex items-center justify-center",onClick:()=>{var e;return null===(e=eo.current)||void 0===e?void 0:e.click()},children:(0,l.jsxs)("div",{className:"flex flex-col items-center",children:[(0,l.jsx)(P.A,{className:"h-8 w-8 text-accent"}),(0,l.jsx)("p",{className:"mt-2 text-sm text-inactive-grey",children:ei||"Click to upload MP3"})]})}),(0,l.jsx)("input",{ref:eo,type:"file",accept:"audio/mp3,audio/mpeg",className:"hidden",onChange:e=>{if(e.target.files&&e.target.files[0]){let s=e.target.files[0];et(s),ed(s.name)}},disabled:w})]})]}),(0,l.jsxs)(i.$,{type:"submit",className:"w-full bg-accent hover:bg-accent/90",disabled:w||!W.trim()||!M||!Y||!Q||!es||!el,children:[w?(0,l.jsx)(C.A,{className:"h-4 w-4 animate-spin mr-2"}):(0,l.jsx)(E.A,{className:"h-4 w-4 mr-2"}),"Add Song"]})]})})]}),(0,l.jsxs)(c.Zp,{className:"bg-white",children:[(0,l.jsxs)(c.aR,{children:[(0,l.jsx)(c.ZB,{className:"text-accent",children:"Songs List"}),(0,l.jsx)(c.BT,{children:"All uploaded songs"})]}),(0,l.jsx)(c.Wu,{children:B?(0,l.jsx)("div",{className:"flex justify-center py-4",children:(0,l.jsx)(C.A,{className:"h-6 w-6 animate-spin text-accent"})}):0===h.length?(0,l.jsx)("p",{className:"text-center text-inactive-grey py-4",children:"No songs found. Add your first song."}):G?(0,l.jsx)("div",{className:"song-table-mobile",children:h.map(e=>(0,l.jsxs)("div",{className:"song-row bg-light-surface",children:[(0,l.jsxs)("div",{className:"song-header",children:[(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsx)(i.$,{variant:"ghost",size:"icon",onClick:()=>eh(e.id,e.song_url),"aria-label":O===e.id?"Pause":"Play",className:"text-accent hover:text-accent/80",children:O===e.id?(0,l.jsx)(R.A,{className:"h-5 w-5"}):(0,l.jsx)(F.A,{className:"h-5 w-5"})}),(0,l.jsx)("img",{src:e.song_image_url||"/placeholder.svg",alt:e.name,className:"h-12 w-12 rounded-md object-cover"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{className:"font-medium",children:e.name}),(0,l.jsx)("p",{className:"text-sm text-inactive-grey",children:eg(e.artist)})]})]}),(0,l.jsx)("div",{className:"text-sm text-inactive-grey",children:(0,U.a3)(e.duration)})]}),(0,l.jsxs)("div",{className:"song-details",children:[(0,l.jsxs)("div",{className:"song-detail-item",children:[(0,l.jsx)("span",{className:"song-detail-label",children:"Language"}),(0,l.jsx)("span",{children:ex(e.language)})]}),(0,l.jsxs)("div",{className:"song-detail-item",children:[(0,l.jsx)("span",{className:"song-detail-label",children:"Genre"}),(0,l.jsx)("span",{children:ep(e.genere)})]})]})]},e.id))}):(0,l.jsx)("div",{className:"overflow-x-auto",children:(0,l.jsxs)(b.XI,{children:[(0,l.jsx)(b.A0,{children:(0,l.jsxs)(b.Hj,{children:[(0,l.jsx)(b.nd,{className:"w-12"}),(0,l.jsx)(b.nd,{className:"w-16",children:"Image"}),(0,l.jsx)(b.nd,{children:"Name"}),(0,l.jsx)(b.nd,{children:"Artist"}),(0,l.jsx)(b.nd,{children:"Language"}),(0,l.jsx)(b.nd,{children:"Genre"}),(0,l.jsx)(b.nd,{children:"Duration"})]})}),(0,l.jsx)(b.BF,{children:h.map(e=>(0,l.jsxs)(b.Hj,{children:[(0,l.jsx)(b.nA,{children:(0,l.jsx)(i.$,{variant:"ghost",size:"icon",onClick:()=>eh(e.id,e.song_url),"aria-label":O===e.id?"Pause":"Play",className:"text-accent hover:text-accent/80",children:O===e.id?(0,l.jsx)(R.A,{className:"h-4 w-4"}):(0,l.jsx)(F.A,{className:"h-4 w-4"})})}),(0,l.jsx)(b.nA,{children:(0,l.jsx)("img",{src:e.song_image_url||"/placeholder.svg",alt:e.name,className:"h-10 w-10 rounded-md object-cover"})}),(0,l.jsx)(b.nA,{className:"font-medium",children:e.name}),(0,l.jsx)(b.nA,{children:eg(e.artist)}),(0,l.jsx)(b.nA,{children:ex(e.language)}),(0,l.jsx)(b.nA,{children:ep(e.genere)}),(0,l.jsx)(b.nA,{children:(0,U.a3)(e.duration)})]},e.id))})]})})}),(0,l.jsxs)(c.wL,{className:"flex justify-between",children:[(0,l.jsxs)(i.$,{variant:"outline",size:"sm",onClick:()=>{T>1&&!B&&em(T-1)},disabled:T<=1||B,className:"border-primary-light text-accent hover:bg-primary-light",children:[(0,l.jsx)(_.A,{className:"h-4 w-4 mr-2"}),"Previous"]}),(0,l.jsxs)("span",{className:"text-sm text-inactive-grey",children:["Page ",T]}),(0,l.jsxs)(i.$,{variant:"outline",size:"sm",onClick:()=>{T<Z&&!B&&em(T+1)},disabled:T>=Z||B,className:"border-primary-light text-accent hover:bg-primary-light",children:["Next",(0,l.jsx)(L.A,{className:"h-4 w-4 ml-2"})]})]})]})]}),(0,l.jsx)("div",{style:{height:"200px",width:"100%",marginBottom:"50px",backgroundColor:"none"}})]})})}}},e=>{var s=s=>e(e.s=s);e.O(0,[2,565,900,39,685,777,441,517,358],()=>s(6205)),_N_E=e.O()}]);